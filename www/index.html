<!DOCTYPE html>
<!--
Outil de fabrication de question QCM au format GIFT pour Moodle
(c) obooklage Académie de Créteil - Académie de Bordeaux
06/05/2020 - 08/03/2024
-->
<html lang="fr">
<head>
    <meta charset="UTF-8">
	<title>Moodle MCQ GIFT Maker</title>

    <!-- Jquery/JQueryMobile -->
	<meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="./images/moodle-icon.png" type="image/icon type">
	<link rel="stylesheet" href="vendor/jquery.mobile-1.4.5/jquery.mobile-1.4.5.min.css" />
	<script src="vendor/jquerymobile.com_1.4.5_js_jquery.js"></script>
	<script src="vendor/jquery.mobile-1.4.5/jquery.mobile-1.4.5.min.js"></script>

    <!-- Mathjax -->
	<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

    <!-- Styles -->
    <link rel="stylesheet" type="text/css" href="css/index.css">
</head>
<body class="no-mathjax">

<!-- Main page -->
<div data-role="page" id="index" data-theme="b">

    <!-- Panel -->
    <div data-role="panel" id="settingspanel" data-display="overlay">
        <label for="text-basic">Category:</label>

        <input type="text" name="text-basic" id="id_theme" value="My bank category">

        <select name="select-h-1a" id="id_question_type">
            <option value="1">One correct awswer</option>
            <option value="2">Two correct awswers</option>
            <option value="3">Three correct awswers</option>
            <option value="4">Four correct awswers</option>
        </select>

        <select name="select-h-1b" id="id_points_negatifs">
            <option value="1">With negative points</option>
            <option value="0">Without negative points</option>
        </select>

        <a href="#" data-rel="close" class="ui-btn ui-shadow ui-corner-all ui-icon-delete ui-btn-icon-left ui-btn-inline">Close</a>
    </div><!-- /panel -->

    <!-- Header -->

	<div data-role="header" data-position="fixed" data-tap-toggle="false" data-theme="b"> <!-- style="height: 16em;" -->
        <a href="#settingspanel" class="ui-btn ui-shadow ui-corner-all ui-btn-inline ui-btn-icon-left ui-icon-gear">Settings</a>
		<h1 id="id_header">Moodle MCQ GIFT Maker</h1>
	</div><!-- /header -->

    <!-- Content -->
	<div role="main" class="ui-content">

	    <!-- <p>LaTeX : les symboles { et } DOIVENT avoir un anti-slash devant, comme \{ et \}, c'est valable pour tous les caractères spéciaux ~ = # { }</p> -->
        <div data-role="collapsible" data-mini="true" data-collapsed="true" data-theme="b" data-content-theme="b" data-collapsed-icon="carat-d" data-expanded-icon="carat-u">
            <h4>Question</h4>
            <fieldset class="ui-grid-b">
            <div class="ui-block-a">
            <label for="id_format_question">
                <div data-role="collapsible" data-content-theme="a">
                <h4>Format:</h4>
                    <p><b>Code snippet</b> :
<textarea readonly>
<pre><code>def Strange(x) :
    y = 2*x+5
    return(y)
print(Strange(-7))
</code></pre></textarea></p>
                    <p><b> LaTeX </b> :
<textarea readonly>
 Maths  \( LaTeXCodeHere \)</textarea></p>
                </div>
            </label>
    </div>
    <div class="ui-block-b">
            <select id="id_format_question">
                <option>html</option>
                <option>plain</option>
            </select>
    </div>
    <div class="ui-block-c">
		<button class="ui-btn ui-corner-all ui-btn-d" id="id_reset">Reset</button>
    </div>
</fieldset>
<fieldset class="ui-grid-a">
    <div class="ui-block-a">
        <label for="id_reponse1">Title:</label>
        <input type="text" name="titre" id="id_titre" value="A program in Python">
    </div>
    <div class="ui-block-b">
        <label for="id_numero">N°</label>
        <input type="text" name="numero" id="id_numero" value="01">
    </div>
</fieldset>

          <label for="id_question">Text:</label>
       
		  <textarea cols="80" rows="10" name="textarea" id="id_question">
Consider the following Python program.
<pre><code>x=4
if 3*x-6<0 :
    x=1
    r=-1
else :
    x=-1
    r=1</code></pre>
What does the variable r contain at the end of the program?</textarea>
   <!-- test with HTML tags
<textarea cols="80" rows="10" name="textarea" id="id_question">Voici un code HTML :
<pre><code> Hello, voici mon formulaire : <form><button>BOUTON</button></form></code></pre>
C'est fini !</textarea>
 -->    
        </div>

        <div data-role="collapsible" data-mini="true" data-collapsed="true" data-theme="b" data-content-theme="b" data-collapsed-icon="carat-d" data-expanded-icon="carat-u">
            <h4>Answers</h4>
              <div class="ui-field-contain">
                <label for="id_format_reponse">Format:</label>
                <select id="id_format_reponse">
                <option>html</option>
                <option>plain</option>
                </select>

                <label for="id_reponse1">Answer 1 (correct) :</label>
                <input type="text" name="reponse1" id="id_reponse1" value="1">

                <label for="id_reponse2">Answer 2:</label>
                <input type="text" name="reponse2" id="id_reponse2" value="x">

                <label for="id_reponse3">Answer 3:</label>
                <input type="text" name="reponse3" id="id_reponse3" value="-1">

                <label for="id_reponse4">Answer 4:</label>
                <input type="text" name="reponse4" id="id_reponse4" value="6">
              </div>
        </div>

        <div data-role="collapsible" data-mini="true" data-collapsed="true" data-theme="b" data-content-theme="b" data-collapsed-icon="carat-d" data-expanded-icon="carat-u">
            <h4>Feedback (optionnal)</h4>
            <textarea cols="80" rows="5" name="textarea" id="id_feedback"></textarea>
        </div>

        <div data-role="collapsible" data-mini="true" data-collapsed="false" data-theme="b" data-content-theme="a" data-collapsed-icon="carat-d" data-expanded-icon="carat-u">
            <h4>Preview</h4>
        <div id="id_apercu" class="mathjax"></div> <!--   overflow:scroll;  -->
        </div>

        <div data-role="collapsible" data-mini="true" data-collapsed="false" data-collapsed-icon="carat-d" data-expanded-icon="carat-u" data-theme="b" data-content-theme="b">
            <h4>GIFT code - Copy into a text editor then import in questions bank</h4>
            <select name="sliderOutput" id="sliderOutput" data-role="slider" data-mini="true" disabled>
                <option value="GIFT" selected>GIFT</option>
                <option value="XML">XML</option>
            </select>
            <div id="id_result"></div>
        </div>

	</div><!-- /content -->

	<div data-role="footer" data-position="fixed" data-tap-toggle="false" data-theme="b">
		<h4>Moodle MCQ GIFT Maker - ADM 2020/SMB33 2024 - <a href='https://github.com/obook/Moodle-MCQ-GIFT-Maker' target='_blank'>GitHub</a></h4>
	</div><!-- /footer -->

	<script type="text/javascript">

    $(document).delegate('.ui-page', 'pageshow', function () {
        console.log("pageshow");
	});

	$(document).on("pagecreate", "#index", function() {
		console.log('pagecreate@index');
	});

    $(document).on("pagebeforeshow", "#index", function()
	{
        console.log('pagebeforeshow@index');
    });

    $(document).on("pageaftershow", "#index", function()
	{
        console.log('pageaftershow@index');
    });

	$( "#id_reset" ).click(function()
	{
		if ( confirm( "Clear all ?" ) )
		{
			$("#id_titre").val("");
			$("#id_numero").val("01");
			$("#id_question").val("");
			$("#id_reponse1").val("");
			$("#id_reponse2").val("");
			$("#id_reponse3").val("");
			$("#id_reponse4").val("");
			$("#id_feedback").val("");
		}
	});

    $("#sliderOutput").change(function()
	{
        SetFormatOutput ($("#sliderOutput").val());
	});

    </script>

</div><!-- /page -->

<script type="text/javascript">

/* Alerte si on ferme l'onglet ou la page : MAIS ne fonctionne pas avec Chrome */

window.addEventListener('beforeunload', function (e) {
  // Cancel the event
  e.preventDefault(); // If you prevent default behavior in Mozilla Firefox prompt will always be shown
  // Chrome requires returnValue to be set
  e.returnValue = '';
});

window.onbeforeunload = function(e) {
  return 'Are you sure you want to leave this page?  You will lose any unsaved data.';
};

</script>
<!-- Main script -->
<script type="module" src="js/index.js"></script>
<script type="module" src="js/preview.js"></script>
<script type="module" src="js/snippet.js"></script>
<script type="module" src="js/gift.js"></script>
<script type="module" src="js/xml.js"></script>
<!-- MathJax Settings-->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [['$','$'],['\\(','\\)']],
        processClass: "mathjax",
        ignoreClass: "no-mathjax"
    }
    });
</script>
</body>
</html>